selectAll.

result(result).

childResult(result, Card, "tasks") :-
    ancestor(Card, {{cardKey}}),
    secdeva_closestProject(Card, Project),
    secdeva_closestProject({{cardKey}}, Project),
    base_recurringTask(Card).

field(Card, "compoundRank", Rank) :-
    card(Card),
    not parent(Card, _),
    field(Card, "rank", Rank).

field(Card, "compoundRank", @concatenate(ParentRank, " - ", Rank)) :-
    card(Card),
    parent(Card, Parent),
    field(Card, "rank", Rank),
    field(Parent, "compoundRank", ParentRank).

orderBy("compoundRank", "ASC").